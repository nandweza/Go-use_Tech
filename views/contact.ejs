<%- include('./partials/head.ejs'); %>
<body class="contact-main">
  <div class="intro">
    <%- include('./partials/nav.ejs'); %>
    <div id="intro-carousel" class="carousel slide d-flex justify-content-center align-items-center" data-bs-ride="carousel" style="height: 75vh;">
      <div class="carousel-inner">
        <div class="carousel-item active">
          <div class="text-center">
            <h2 class="intro-header fs-*">Contact us ...</h2>
          </div>
        </div>
        <div class="carousel-item">
          <div class="text-center">
            <em class="carousel-em fs-*">Reach out to our team.</em>
          </div>
        </div>
        <div class="carousel-item">
          <div class="text-center">
            <em class="carousel-em fs-*">We're here to help...</em>
          </div>
        </div>
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#intro-carousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#intro-carousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>
  </div>
  <div class="contact-title d-flex align-items-center justify-content-center">
    <h3>Send us a message</h3>
  </div>
  <div class="contact-us py-5">
    <form action="/contact" method="post" class="contact-Form">
      <div class="row">
        <div class="col">
          <div class="form-group">
            <input type="text" id="name" name="name" class="form-control p-3" placeholder="Enter your Name">
          </div>
        </div>
        <div class="col">
          <div class="form-group">
            <input type="email" id="email" name="email" class="form-control p-3" placeholder="Enter your Email">
          </div>
        </div>
      </div>
      <div class="col pt-2">
        <input type="text" id="subject" name="subject" class="form-control p-3" placeholder="Subject">
      </div>
      <div class="col pt-2 pb-4">
        <textarea name="message" id="message" cols="30" rows="10" class="form-control" placeholder="Type your Message"></textarea>
      </div>
      <div class="text-center">
        <input class="btn btn-primary p-2 btn-adjust" type="submit" value="Submit">
      </div>
    </form>
  </div>
  <div class="container get-in-touch">
    <div class="row p-5">
      <div class="col-lg-4 col-md-6">
        <div class="card p-5 text-center black">
          <i class="fa fa-map-marker pb-2"></i>
          <span>Kampala, Uganda</span>
        </div>
      </div>
      <div class="col-lg-4 col-md-6">
        <div class="card p-5 text-center blue">
          <i class="fa fa-phone-square pb-2"></i>
          <span>+256779113920</span>
        </div>
      </div>
      <div class="col-lg-4 col-md-6">
        <div class="card p-5 text-center orange">
          <i class="fa fa-envelope pb-2"></i>
          <span>usetech.go@gmail.com</span>
        </div>
      </div>
    </div>
  </div>
  <%- include('./partials/footer.ejs'); %>
</body>

<script>
  const contactForm = document.querySelector('.contact-Form');
  let name = document.getElementById('name');
  let email = document.getElementById('email');
  let subject = document.getElementById('subject');
  let message = document.getElementById('message');
  contactForm.addEventListener('submit', (e) => {
    e.preventDefault();
    let formData = {
      name: name.value,
      email: email.value,
      subject: subject.value,
      message: message.value
    }
    // console.log(formData);
    let xhr = new XMLHttpRequest();
    xhr.open('POST', '/contact');
    xhr.setRequestHeader('content-type', 'application/json');
    xhr.onload = () => {
      console.log(xhr.responseText);
      if(xhr.responseText == 'success') {
        alert('Email sent successfully!');
        name.value = '';
        email.value = '';
        subject.value = '';
        message.value = '';
      } else {
        alert('something went wrong!');
      }
    }
    xhr.send(JSON.stringify(formData));
  })
</script>